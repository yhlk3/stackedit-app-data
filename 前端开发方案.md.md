## 前端开发方案（全部为后台）：



### 一.**黄金单件调拨入库单：**

列表页面底部增加合计栏（金额合计、金重合计、件数合计）。
列表接口：/deposit/bfGoldAncientInlayTransferIn/getList
我现在多传了：

```json
      "sumData": {
            "totalAllocationWorkFeeLabour": 金额合计,
            "totalNum": 件数合计,
            "totalWeight": 发货金重合计,
            "label": "合计"（这里返回的永远是合计这俩字，便于会姐展示）
        }
```









### 二.**古法单件优惠表**:

**1.导出明细**
接口：POST /decent-cloud-deposit-biz/settlement/AncientSingletonDiscount/exportDetailExcel

参数：

```json

{
  "filters": {
      "singleType":0为黄素单件，1为点钻单件。
      "customerName":"筛选条件的客户名称" //没选可不传
  },
  "list": [],
  "export": true
}
```



**2.支持明细（品项类别，款式类别，工厂款号，克工费）反查：**

因为这里如果在加反查的接口，会让前端的判断很麻烦。

而且正查反查都调用接口，会有冲突，很麻烦。

于是决定使用统一接口，不管正查反查，就使用一个接口（如果选择了品项类别，那么只传成色，优惠类型，品项类别即可，这个接口会返回对应的款式类别，工厂款号，销售附加克工费。依次类推）

接口：POST  /decent-cloud-deposit-biz/settlement/KaDjkczbDiscountConfig/cascade

参数示例：

```json
{
  "singleType": 1, //优惠类型，必传
  "purityName": "古法金,古法万足金",//成色，必传
  "itemCategory": "戒指",//品项类别，如果没有选择，可以不传
  "styleCategory": "条戒",//款式类别，如果没有选择，可以不传
  "factoryCode": "ZG-JZ-ST036" //工厂款号，如果没有选择可以不传
}
```

返回示例：

```json
{
    "success": true,
    "message": "操作成功！",
    "code": 200,
    "result": {
        "itemCategories": [
            "戒指"
        ],
        "styleCategories": [
            "条戒"
        ],
        "factoryCodes": [
            "ZG-JZ-ST036"
        ],
        "saleAdditionalWeightCosts": [
            18.80,
            6.60,
            14.50,
            11.20,
            16.00 //附加克工费
        ]
    },
    "doType": null,
    "otherObj": null,
    "totalData": null,
    "timestamp": 1760431529760
}
```



**3.工厂款号模糊查询**

接口：GET /deposit/settlement/KaDjkczbDiscountConfig/factoryCodeSuggest**?singleType=xxx(优惠类型0，1)&purityName=古法金,古法万足金&keyword=ZG-D**

返回：

```json
{
    "success": true,
    "message": "操作成功！",
    "code": 200,
    "result": [
        "DZ-DK8042"
    ],
    "doType": null,
    "otherObj": null,
    "totalData": null,
    "timestamp": 1760512150123
}
```







### 三.上辰金单件优惠表:

**1.支持明细（品项类别，款式类别，工厂款号，克工费）反查：**

同样统一使用接口。

接口路径：POST /deposit/scGoldCustomer/discount/cascade

参数：

```json
{
  "purityName": "上辰金千足",//成色，必填
  "productCategory": "素黄金类",//产品大类，必填
  "itemCategory": "吊坠",//品项类别，没选可不传
  "styleCategory": "切割CNC吊坠",//款式类别，没选可不传
  "factoryCode": "DZ-J10946"，//工厂款号，没选可不传
}
```

返回示例：

```json
{
    "success": true,
    "message": "操作成功！",
    "code": 200,
    "result": {
        "factoryModelNumbers": [
            "DZ-J10946"
        ],
        "styleCategorys": [
            "切割CNC吊坠"
        ],
        "itemCategorys": [
            "吊坠"
        ],
        "isalesSurchargesCostOfWorks": [
            4.00 //附加克工费
        ]
    },
    "doType": null,
    "otherObj": null,
    "totalData": null,
    "timestamp": 1760431595280
}
```



**2.上辰金单件优惠表工厂款号模糊查询**

接口：/deposit/KaDjkczb/factoryCodeSuggest**?purityName=上辰金千足（成色）&productCategory=素黄金类（产品大类）&keyword=ZG-（模糊查询关键词）**

**3.上辰金客户导出明细接口**

接口：/deposit/scGoldCustomer/discount/exportDetailXls

参数：

```json

{
  "filters": {
     "customerName":"筛选条件的客户名称" //没选可不传
     "customerCode":"客户编码"//没选可不传
     "productCategory":"产品大类" //没选可不传
     "purityName":"成色名称"//没选可不传
  }
}
```







### 四.**黄金单件调拨出库单：**

**1.新增打标功能**

接口：GET /deposit/bfGoldAncientInlayTransferOut/label/printInfo
参数：要打标的明细数据的identity（detailIdentity）
示例：**/deposit/bfGoldAncientInlayTransferOut/label/printInfo?detailIdentity=xxxxx**







### 五.**转欠工费录入单**：

**1.明细中加了个产品大类字段**

​	(1.保存接口:POST /decent-cloud-deposit-biz/tBfTransferOwedWorkFeeInput/transferOwedWorkFeeInput/save

​     说明：保存的时候需要多传个productCategory

​	(2.明细接口：GET  /decent-cloud-deposit-biz/tBfTransferOwedWorkFeeInput/transferOwedWorkFeeInput/getDetail/{identity}

​     说明：在返回的明细中多返回了个productCategory产品大类字段

​	(3.修改接口：POST /decent-cloud-deposit-biz/tBfTransferOwedWorkFeeInput/transferOwedWorkFeeInput/update

​     说明：编辑的时候多传个productCategory





### 六.返利活动码表：

原有的保存和编辑接口：

1. 编辑接口：POST /decent-cloud-deposit-biz/activity/rebateActivityBase/update     编辑。

2.  保存接口：POST /decent-cloud-deposit-biz/activity/rebateActivityBase/save    保存。

   说明：在原参数中的 **"rebateActivityDetailList[]"下多传一个产品大类**productCategory**

   示例：

   ```json
   {
       "rebateActivityDetailList": [
           {    //在原有基础上多传个"productCategory":"产品大类",
               "productCategory":"产品大类",
           }
       ],
       "rebateActivityEliminateList": [
           {
               //不变
           }
       ],
       "rebateActivityLadderList": [
           {
               //不变
           }
       ],
       "specialClientTypeS": []
   }
   ```
   
   
   
   3.详细接口 ：**GET /decent-cloud-deposit-biz/activity/rebateActivityBase/getDetail** 
   
   说明：返回值中多返回了 **"productCategory":"产品大类"**。
   
   





### 七.新增了一个标准工费码表

1.**列表**

接口:POST /deposit/readyMoney/list
参数：

```json
{
  "page": 1,
  "size": 20
}
```

返回：

```json
{
    "success": true,
    "message": "操作成功！",
    "code": 200,
    "result": {
        "records": [
            {
                "purityName": "古法999.99",//成色
                "workFee": 6.000,//工费
                "updateBy": null,//修改人
                "purityIdentity": "17D4B846-0600-0012-BC6B-66042542BE5D",
                "updateTime": null,//修改时间
                "id": 14,//id
                "workFeeType": "现款现料",//转欠工费类型
                "showroomName": "深圳展厅",//网点名称
                "rq": "2022-02-23 10:30:08",
                "productCategory": null//产品大类
            }
        ],
        "total": 12,
        "size": 10,
        "current": 1,
        "orders": [],
        "searchCount": true,
        "pages": 2
    },
    "doType": null,
    "otherObj": null,
    "totalData": null,
    "timestamp": 1760513580346
}
```

**2.详细**

接口：GET /deposit/readyMoney/info/{id}
参数:
id，编辑的数据的id。**没有**identity

编辑接口：POST /deposit/readyMoney/update

参数

```json
{
                "purityName": "古法999.99",
                "workFee": 5.000,//工费可以编辑
                "showroomName": "深圳展厅",
                "updateBy": null,
                "purityIdentity": "17D4B846-0600-0012-BC6B-66042542BE5D",
                "updateTime": null,
                "id": 14,
                "workFeeType": "现款现料",
                "rq": "2022-02-23 10:30:08",
                "productCategory": null
            }
```

3.**成色支持模糊查询**

接口：GET/deposit/readyMoney/getPurityTypeList**?keyword=xxx**
参数：
为成色的模糊查询keyword
返回：

```json
{
    "success": true,
    "message": "操作成功！",
    "code": 200,
    "result": [
        {
            "purityName": "古法金",//成色名称
            "purityIdentity": "e52a7228-1bfe-11eb-952f-beb5915aa4c3",
            "purityCode": "33"
        }
    ],
    "doType": null,
    "otherObj": null,
    "totalData": null,
    "timestamp": 1760514425955
}
```

### 8.黄金单件退饰单

详细新增产品大类字段

详细接口：/decent-cloud-deposit-biz/settlement/GoldSingleReturn/getDetail   

多返回了**productCategory** 产品大类字段

扫码扫进商品的扫码接口：/decent-cloud-deposit-biz/settlement/GoldSingleReturn/getInfoByLabelUnicode

也多返回了**productCategory** 产品大类字段

